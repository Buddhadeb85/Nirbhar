<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expenses Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .card {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        .label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        .value {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        .balance .value { color: #2e8b57; }
        .income .value { color: #228b22; }
        .expenses .value { color: #dc143c; }
        .registers .value { color: #4169e1; }

        .open-app-btn {
            display: block;
            width: 200px;
            margin: 30px auto;
            padding: 12px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 8px;
            font-size: 16px;
        }
        .open-app-btn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h2>My Expenses Summary</h2>

    <div class="summary-cards">
        <div class="card balance">
            <div class="icon">ðŸ’°</div>
            <div class="label">Total Balance</div>
            <div class="value" id="totalBalance">â‚¹0.00</div>
        </div>
        <div class="card income">
            <div class="icon">ðŸ“ˆ</div>
            <div class="label">Income This Month</div>
            <div class="value" id="monthlyIncome">â‚¹0.00</div>
        </div>
        <div class="card expenses">
            <div class="icon">ðŸ“‰</div>
            <div class="label">Expenses This Month</div>
            <div class="value" id="monthlyExpenses">â‚¹0.00</div>
        </div>
        <div class="card registers">
            <div class="icon">ðŸ“Š</div>
            <div class="label">Active Expense Categories</div>
            <div class="value" id="activeCategories">0</div>
        </div>
    <div class="summary-cards">
        <div class="card balance">
            <div class="icon">ðŸ’°</div>
            <div class="label">Total Balance</div>
            <div class="value" id="totalBalance">â‚¹0.00</div>
        </div>
        <div class="card income">
            <div class="icon">ðŸ“ˆ</div>
            <div class="label">Income This Month</div>
            <div class="value" id="monthlyIncome">â‚¹0.00</div>
        </div>
        <div class="card expenses">
            <div class="icon">ðŸ“‰</div>
            <div class="label">Expenses This Month</div>
            <div class="value" id="monthlyExpenses">â‚¹0.00</div>
        </div>
        <div class="card registers">
            <div class="icon">ðŸ“Š</div>
            <div class="label">Active Expense Categories</div>
            <div class="value" id="activeCategories">0</div>
        </div>
    </div>

    

    <script>
        // Load and calculate summary from localStorage (shared with expenses-app.html)
        function loadSummary() {
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];

            // Current month and year
            const today = new Date();
            const currentMonth = today.getMonth(); // 0-11
            const currentYear = today.getFullYear();

            // Filter this month's transactions
            const thisMonthTransactions = transactions.filter(trans => {
                const transDate = new Date(trans.date);
                return transDate.getMonth() === currentMonth && transDate.getFullYear() === currentYear;
            });

            // Calculate totals
            let totalIncome = 0;
            let totalExpenses = 0;
            let overallBalance = 0;

            transactions.forEach(trans => {
                if (trans.type === 'income') {
                    overallBalance += trans.amount;
                    if (new Date(trans.date).getMonth() === currentMonth && new Date(trans.date).getFullYear() === currentYear) {
                        totalIncome += trans.amount;
                    }
                } else {
                    overallBalance -= trans.amount;
                    if (new Date(trans.date).getMonth() === currentMonth && new Date(trans.date).getFullYear() === currentYear) {
                        totalExpenses += trans.amount;
                    }
                }
            });

            // Unique expense categories used (active registers)
            const expenseCategories = new Set();
            transactions.filter(t => t.type === 'expense').forEach(t => expenseCategories.add(t.category));
            const activeCount = expenseCategories.size;

            // Update the cards
            document.getElementById('totalBalance').textContent = `â‚¹${overallBalance.toFixed(2)}`;
            document.getElementById('monthlyIncome').textContent = `â‚¹${totalIncome.toFixed(2)}`;
            document.getElementById('monthlyExpenses').textContent = `â‚¹${totalExpenses.toFixed(2)}`;
            document.getElementById('activeCategories').textContent = activeCount;
        }

        // Load on page open
        window.onload = loadSummary;

        // Optional: Auto-refresh every 10 seconds if app is open in another tab
        // setInterval(loadSummary, 10000);
    </script>
</body>
</html>